<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Web Push Notification Example</title>
<script type="text/javascript" src="sw.js"></script></head>
<body>
  <h1>Web Push Notification Demo</h1>
  <button onclick="subscribeUser()">Enable Notifications</button>
  
  <script>
    // Check if notifications are supported
    if ('Notification' in window && 'serviceWorker' in navigator) {
      console.log("Notifications and Service Workers are supported.");
    } else {
      alert("Your browser does not support notifications.");
    }

    // Register the Service Worker
    async function registerServiceWorker() {
      return await navigator.serviceWorker.register('sw.js');
    }

    // Request permission and subscribe the user
    async function subscribeUser() {
      const permission = await Notification.requestPermission();
      
      if (permission === 'granted') {
        const registration = await registerServiceWorker();
        showLocalNotification("Notifications Enabled", "You will receive updates!", registration);
      } else {
        alert("Notification permission denied.");
      }
    }

    // Display a local notification
    function showLocalNotification(title, body, swRegistration) {
      const options = {
        body,
        icon: 'icon.png', // Optional icon
        vibrate: [200, 100, 200],
        tag: 'demo-notification', // Tag to prevent duplicate notifications
      };
      swRegistration.showNotification(title, options);
    }
  </script>
</body>
</html>
